{"version":3,"sources":["../../../app/src/services/user.service.js"],"names":["logger","require","axios","loggedInUserService","config","UserService","getEmailById","userId","info","baseURL","get","response","default","url","method","headers","authorization","token","user","data","attributes","email","e","getNameByIdMICROSERVICE","firstName","lastName","module","exports"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,aAAtB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAArB;;AACA,MAAME,mBAAmB,GAAGF,OAAO,yBAAnC;;AACA,MAAMG,MAAM,GAAGH,OAAO,CAAC,QAAD,CAAtB;;AAEA,MAAMI,WAAN,CAAkB;AACS,eAAZC,YAAY,CAACC,MAAD,EAAS;AAChCP,IAAAA,MAAM,CAACQ,IAAP,CAAY,qBAAZ,EAAmCD,MAAnC;;AACA,QAAI;AACF,UAAIE,OAAO,GAAGL,MAAM,CAACM,GAAP,CAAW,cAAX,CAAd;AACA,YAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,OAAN,CAAc;AACnCH,QAAAA,OADmC;AAEnCI,QAAAA,GAAG,EAAG,SAAQN,MAAO,EAFc;AAGnCO,QAAAA,MAAM,EAAE,KAH2B;AAInCC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAEb,mBAAmB,CAACc;AAD5B;AAJ0B,OAAd,CAAvB;AAQA,YAAMC,IAAI,GAAGP,QAAQ,CAACQ,IAAtB;AACA,UAAI,CAACD,IAAD,IAAS,CAACA,IAAI,CAACC,IAAnB,EAAyB,OAAO,IAAP;AACzBnB,MAAAA,MAAM,CAACQ,IAAP,CAAY,qBAAZ,EAAmCU,IAAnC;AACA,aAAOA,IAAI,CAACC,IAAL,GAAYD,IAAI,CAACC,IAAL,CAAUC,UAAV,CAAqBC,KAAjC,GAAyC,IAAhD;AACD,KAdD,CAcE,OAAOC,CAAP,EAAU;AACVtB,MAAAA,MAAM,CAACQ,IAAP,CAAY,oBAAZ,EAAkCc,CAAlC;AACA,aAAO,IAAP;AACD;AACF;;AAEmC,eAAvBC,uBAAuB,CAAChB,MAAD,EAAS;AAC3C,QAAI,CAACA,MAAL,EAAa,OAAO,IAAP;;AACb,QAAI;AACF,UAAIE,OAAO,GAAGL,MAAM,CAACM,GAAP,CAAW,cAAX,CAAd;AACA,YAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACU,OAAN,CAAc;AACnCH,QAAAA,OADmC;AAEnCI,QAAAA,GAAG,EAAG,SAAQN,MAAO,EAFc;AAGnCO,QAAAA,MAAM,EAAE,KAH2B;AAInCC,QAAAA,OAAO,EAAE;AACPC,UAAAA,aAAa,EAAG,UAASZ,MAAM,CAACM,GAAP,CAAW,eAAX,CAA4B;AAD9C;AAJ0B,OAAd,CAAvB;AAQA,YAAMQ,IAAI,GAAGP,QAAQ,CAACQ,IAAtB;AACA,UAAI,CAACD,IAAD,IAAS,CAACA,IAAI,CAACC,IAAnB,EAAyB,OAAO,IAAP;AACzB,aAAOD,IAAI,CAACC,IAAL,CAAUC,UAAV,CAAqBI,SAArB,GACF,GAAEN,IAAI,CAACC,IAAL,CAAUC,UAAV,CAAqBI,SAAU,IAAGN,IAAI,CAACC,IAAL,CAAUC,UAAV,CAAqBK,QAAS,EADhE,GAEHP,IAAI,CAACC,IAAL,CAAUC,UAAV,CAAqBK,QAFzB;AAGD,KAfD,CAeE,OAAOH,CAAP,EAAU;AACVtB,MAAAA,MAAM,CAACQ,IAAP,CAAa,sBAAqBD,MAAO,EAAzC,EAA4Ce,CAA5C;AACA,aAAO,IAAP;AACD;AACF;;AA5Ce;;AA+ClBI,MAAM,CAACC,OAAP,GAAiBtB,WAAjB","sourcesContent":["const logger = require(\"logger\");\nconst axios = require(\"axios\");\nconst loggedInUserService = require(\"./LoggedInUserService\");\nconst config = require(\"config\");\n\nclass UserService {\n  static async getEmailById(userId) {\n    logger.info(\"Get user by user id\", userId);\n    try {\n      let baseURL = config.get(\"usersApi.url\");\n      const response = await axios.default({\n        baseURL,\n        url: `/user/${userId}`,\n        method: \"GET\",\n        headers: {\n          authorization: loggedInUserService.token\n        }\n      });\n      const user = response.data;\n      if (!user || !user.data) return null;\n      logger.info(\"Get user by user id\", user);\n      return user.data ? user.data.attributes.email : null;\n    } catch (e) {\n      logger.info(\"Error finding user\", e);\n      return null;\n    }\n  }\n\n  static async getNameByIdMICROSERVICE(userId) {\n    if (!userId) return null;\n    try {\n      let baseURL = config.get(\"usersApi.url\");\n      const response = await axios.default({\n        baseURL,\n        url: `/user/${userId}`,\n        method: \"GET\",\n        headers: {\n          authorization: `Bearer ${config.get(\"service.token\")}`\n        }\n      });\n      const user = response.data;\n      if (!user || !user.data) return null;\n      return user.data.attributes.firstName\n        ? `${user.data.attributes.firstName} ${user.data.attributes.lastName}`\n        : user.data.attributes.lastName;\n    } catch (e) {\n      logger.info(`Error finding user ${userId}`, e);\n      return null;\n    }\n  }\n}\n\nmodule.exports = UserService;\n"],"file":"user.service.js"}