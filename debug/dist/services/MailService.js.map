{"version":3,"sources":["../../../app/src/services/MailService.js"],"names":["config","require","logger","AsyncClient","MailService","constructor","debug","asynClient","REDIS","url","get","toChannel","sendMail","template","data","recipients","emit","JSON","stringify","module","exports"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMC,MAAM,GAAGD,OAAO,aAAtB;;AACA,MAAME,WAAW,GAAGF,OAAO,CAAC,mBAAD,CAA3B;;AAEA,MAAMG,WAAN,CAAkB;AAChBC,EAAAA,WAAW,GAAG;AACZH,IAAAA,MAAM,CAACI,KAAP,CAAa,yCAAb;AAEA,SAAKC,UAAL,GAAkB,IAAIJ,WAAJ,CAAgBA,WAAW,CAACK,KAA5B,EAAmC;AACnDC,MAAAA,GAAG,EAAET,MAAM,CAACU,GAAP,CAAW,WAAX;AAD8C,KAAnC,CAAlB;AAIA,SAAKH,UAAL,GAAkB,KAAKA,UAAL,CAAgBI,SAAhB,CAA0BX,MAAM,CAACU,GAAP,CAAW,iBAAX,CAA1B,CAAlB;AACD;;AAEDE,EAAAA,QAAQ,CAACC,QAAD,EAAWC,IAAX,EAAiBC,UAAjB,EAA6B;AACnC,SAAKR,UAAL,CAAgBS,IAAhB,CACEC,IAAI,CAACC,SAAL,CAAe;AACbL,MAAAA,QADa;AAEbC,MAAAA,IAFa;AAGbC,MAAAA;AAHa,KAAf,CADF;AAOD;;AAnBe;;AAsBlBI,MAAM,CAACC,OAAP,GAAiB,IAAIhB,WAAJ,EAAjB","sourcesContent":["const config = require(\"config\");\nconst logger = require(\"logger\");\nconst AsyncClient = require(\"vizz.async-client\");\n\nclass MailService {\n  constructor() {\n    logger.debug(\"Initializing queue with provider Redis.\");\n\n    this.asynClient = new AsyncClient(AsyncClient.REDIS, {\n      url: config.get(\"redis.url\")\n    });\n\n    this.asynClient = this.asynClient.toChannel(config.get(\"redis.queueName\"));\n  }\n\n  sendMail(template, data, recipients) {\n    this.asynClient.emit(\n      JSON.stringify({\n        template,\n        data,\n        recipients\n      })\n    );\n  }\n}\n\nmodule.exports = new MailService();\n"],"file":"MailService.js"}